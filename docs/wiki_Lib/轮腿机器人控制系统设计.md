# **轮腿机器人控制系统设计**

[参考资料](https://zhuanlan.zhihu.com/p/563048952)
## **一、动力学模型建立**

### **1.1 模型定义**
* 模型主要描述机体、腿部姿态和驱动轮的动力学特性，只考虑腿部姿态，忽略腿部长度变化

* 定义机器人由机体、摆杆和驱动轮组成

* 实际属于二阶倒立摆模型，模型定义如下图所示

<div align=center>
<img src="./%E8%BD%AE%E8%85%BF%E6%9C%BA%E5%99%A8%E4%BA%BA%E7%AE%80%E5%8C%96%E6%A8%A1%E5%9E%8B.jpg"/>
</div>


其中：

|符号|含义|方向|单位|
|:---:|:---|:---|:--:|
|$\theta$|摆杆与竖直方向夹角|顺时针为正|rad|
|$x$|驱动轮位移|箭头方向|m|
|$\phi$|机体与水平方向夹角|顺时针为正|rad|
|$\alpha$|机体与摆杆的夹角|
|$T$|驱动轮输出力矩|顺时针为正|
|$T_p$|髋关节输出力矩|顺时针为正|
|$N$|驱动轮对摆杆作用力竖直分量|箭头方向|N|
|$P$|驱动轮对摆杆作用力水平分量|箭头方向|N|
|$N_M$|摆杆对机体作用力竖直分量|箭头方向|N|
|$P_M$|摆杆对机体作用力水平分量|箭头方向|N|
|$N_f$|地面对驱动轮的摩擦力|箭头方向|N|
|$R$|驱动轮半径||m|
|$L$|摆杆质心到驱动轮轴距离||m|
|$L_M$|摆杆质心到机体旋转轴距离||m|
|$l$|机体质心到机体旋转轴距离||m|
|$m_w$|驱动轮质量||kg|
|$m_p$|摆杆质量||kg|
|$M$|机体质量||kg|
|$I_w$|驱动轮转动惯量||$kg\cdot m^2$|
|$I_p$|摆杆绕质心转动惯量||$kg\cdot m^2$|
|$I_M$|机体绕质心转动惯量||$kg\cdot m^2$|

### **1.2 经典力学分析**

**对于驱动轮：**

$$m_w\ddot{x} = N_f - N  \tag{1.1}$$


$$I_w \frac{\ddot{x}}{R} = T - N_f R  \tag{1.2}$$

合并式(1.1)，(1.2)消去$N_f$  得：

$$ \ddot{x} = \frac{T-NR}{\frac{I_w}{R} + m_wR} \tag{1.3}$$

**对于摆杆：**
$$N-N_M = m_p \frac{{\partial}^2}{\partial t^2} (x+L\sin\theta) \tag{1.4}$$
$$P-P_M - m_pg = m_p \frac{{\partial}^2}{\partial t^2} (L\cos\theta) \tag{1.5}$$

$$I_p\ddot{\theta} = (PL + P_ML_M)\sin\theta  - (NL+N_ML_M)\cos\theta - T +T_p$$
注：$P_M N_M$作用在摆杆上的力是箭头反方向的

**对于机体：**
$$N_M = M\frac{{\partial}^2}{\partial t^2} (x+(L+L_M)\sin\theta -l\sin\phi)  \tag{1.7}$$

$$P_M - Mg = M\frac{{\partial}^2}{\partial t^2} ((L+L_M)\cos\theta +l\cos\phi)  \tag{1.8}$$

$$I_M \ddot{\phi} = T_p + N_M l \cos\phi  + P_M l \sin\phi \tag{1.9}$$
